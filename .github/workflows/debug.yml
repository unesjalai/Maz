name: Debug Committed Files

on:
  push:
    branches: [main]
  workflow_dispatch:  # Allows manual trigger

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Show all committed files
      run: |
        echo "=== All files in this repository (committed) ==="
        git ls-files
        echo ""
        
        echo "=== Show repository root structure ==="
        ls -la
        echo ""
        
        echo "=== Check if package.json exists anywhere ==="
        find . -name "package.json" -type f || echo "No package.json found"
        echo ""
        
        echo "=== Show git status (what would be committed) ==="
        git status
        echo ""
        
        echo "=== Show recent commits and their files ==="
        git show --name-only HEAD
