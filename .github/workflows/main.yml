name: Debug Repository Structure - Extended

on:
  push:
    branches: [main]

jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Check current branch
      run: |
        echo "=== Current branch ==="
        git branch --show-current
        echo ""
        
        echo "=== List all branches ==="
        git branch -a
        echo ""
    
    - name: Check .github folder contents
      run: |
        echo "=== Contents of .github folder ==="
        ls -la .github/
        echo ""
        
        echo "=== Contents of .github/workflows (if exists) ==="
        ls -la .github/workflows/ 2>/dev/null || echo "No workflows folder"
        echo ""
    
    - name: Check for any committed files
      run: |
        echo "=== List all files in repository (including hidden) ==="
        git ls-files
        echo ""
        
        echo "=== Check recent commits ==="
        git log --oneline -5
        echo ""
    
    - name: Check if this is a fresh repository
      run: |
        echo "=== Check if there are any files at all ==="
        if [ $(git ls-files | wc -l) -eq 0 ]; then
          echo "⚠️ WARNING: No files are committed to this repository!"
        else
          echo "✅ Found $(git ls-files | wc -l) committed files"
        fi
